<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Editar Recurso</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style> body { background-color: #f8f9fa; } .sidebar { width: 280px; height: 100vh; position: fixed; top: 0; left: 0; background-color: #004d99; color: white; padding-top: 20px; } .main-content { margin-left: 280px; padding: 30px; } </style>
</head>
<body>
    <nav class="sidebar d-flex flex-column d-none d-md-flex">
        <div class="px-4 mb-4"><h4>Admin BDMES</h4></div>
        <ul class="nav flex-column pe-3">
            <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('inventario') }}">Volver al Inventario</a></li>
        </ul>
    </nav>
    <main class="main-content">
        <h2>Editando: {{ recurso.titulo }}</h2>
        <form action="{{ url_for('guardar_edicion_recurso', recurso_id=recurso.id_recurso) }}" method="POST" enctype="multipart/form-data">
            <div class="mb-3">
                <label>Título</label>
                <input type="text" class="form-control" name="titulo" value="{{ recurso.titulo }}" required>
            </div>
            <div class="mb-3">
                <label>Autor</label>
                <input type="text" class="form-control" name="autor" value="{{ recurso.autor }}" required>
            </div>
            <div class="mb-3">
                <label>Categoría</label>
                <input class="form-control" list="listaCategorias" name="categoria" value="{{ recurso.categoria }}" required>
                <datalist id="listaCategorias">
                    <option value="General"><option value="Español"><option value="Matemáticas">
                    <option value="Ciencias"><option value="Historia"><option value="Cuentos">
                </datalist>
            </div>
            <div class="mb-3">
                <label>Descripción</label>
                <textarea class="form-control" name="descripcion">{{ recurso.descripcion }}</textarea>
            </div>
            
            <!-- Campo para la miniatura -->
            <div class="mb-3">
                <label class="form-label">Portada/Miniatura (opcional)</label>
                <input type="file" class="form-control" name="miniatura" accept="image/*">
                {% if recurso.ruta_miniatura %}
                    <small class="text-success">✓ Ya tiene portada cargada</small>
                {% endif %}
            </div>
            
            <button type="submit" class="btn btn-primary w-100">Guardar Cambios</button>
        </form>
    </main>
</body>
</html>